# Vue 3 nextTick vs onUpdated 详解

## 核心区别

### nextTick
- **手动调用**：需要主动调用 `await nextTick()`
- **精确控制**：只在需要时执行
- **异步等待**：确保 DOM 更新完成后再执行后续代码
- **使用场景**：需要在 DOM 更新后立即执行特定操作

### onUpdated
- **自动触发**：每次组件更新都会自动执行
- **生命周期钩子**：Vue 组件生命周期的一部分
- **全局监听**：监听所有更新事件
- **使用场景**：需要在每次更新后执行副作用操作

## 执行时机对比

```
用户操作 → 数据变化 → DOM 更新 → nextTick 回调 → onUpdated 钩子
```

## 实际应用场景

### nextTick 适用场景
1. **DOM 操作**：更新后需要操作 DOM 元素
2. **第三方库集成**：需要等待 Vue 更新完成后再初始化
3. **精确控制**：只在特定操作后执行代码

### onUpdated 适用场景
1. **调试监控**：监听所有组件更新
2. **全局副作用**：每次更新都需要执行的操作
3. **性能监控**：统计组件更新次数

## 代码示例说明

运行示例后，打开浏览器控制台观察：

1. **点击按钮时**：
   - 先看到 "nextTick 前" 的日志（DOM 未更新）
   - 然后看到 "nextTick 后" 的日志（DOM 已更新）
   - 最后看到 "onUpdated 触发" 的日志

2. **onUpdated 日志区域**：
   - 显示所有更新记录
   - 包括组件初始化和每次点击

## 最佳实践

- 使用 `nextTick` 进行精确的 DOM 操作
- 使用 `onUpdated` 进行全局监控和调试
- 避免在 `onUpdated` 中修改响应式数据（可能导致无限循环）
